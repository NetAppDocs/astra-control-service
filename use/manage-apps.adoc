---
sidebar: sidebar
permalink: use/manage-apps.html
keywords: manage app, discover app, ignore app
summary: After you add a Kubernetes cluster to Astra Control, you can install apps on that cluster (outside of Astra Control), and then go to the Apps page in Astra Control to start managing the apps.
---

= Start managing apps
:hardbreaks:
:icons: font
:imagesdir: ../media/use/

After you link:../get-started/add-first-cluster.html[add a Kubernetes cluster to Astra Control], you can install apps on the cluster (outside of Astra Control), and then go to the Apps page in Astra Control to start managing the apps.

== App management requirements
Astra Control has the following app management requirements:

* *Licensing*: To manage apps using Astra Control Center, you need an Astra Control Center license.
* *Namespaces*: Astra Control requires that an app not span more than a single namespace, but a namespace can contain more than one app.
* *StorageClass*: If you install an app with a StorageClass explicitly set and you need to clone the app, the target cluster for the clone operation must have the originally specified StorageClass. Cloning an application with an explicitly set StorageClass to a cluster that does not have the same StorageClass will fail.
* *Kubernetes resources*: Apps that use Kubernetes Resources not collected by Astra Control might not have full app data management capabilities. Astra Control collects the following Kubernetes resources:

[cols="1,1,1"]
|===
|ClusterRole
|ClusterRoleBinding
|ConfigMap

|CustomResourceDefinition
|CustomResource
|CronJob

|DaemonSet
|HorizontalPodAutoscaler
|Ingress

|DeploymentConfig
|MutatingWebhook
|PersistentVolumeClaim

|Pod
|PodDisruptionBudget
|PodTemplate

|NetworkPolicy
|ReplicaSet
|Role

|RoleBinding
|Route
|Secret

|Service
|ServiceAccount
|StatefulSet

|ValidatingWebhook
|
|
|===

=== Supported app installation methods
You can use the following methods to install apps that you want to manage with Astra Control:

* *Manifest file*: Astra Control supports apps installed from a manifest file using kubectl. For example:
+
----
kubectl apply -f myapp.yaml
----
* *Helm 3*: If you use Helm to install apps, Astra Control requires Helm version 3. Managing and cloning apps installed with Helm 3 (or upgraded from Helm 2 to Helm 3) are fully supported. Managing apps installed with Helm 2 is not supported.
//* *Operator management*: Astra Control Center does not support apps that are deployed with Operator Lifecycle Manager (OLM)-enabled operators or cluster-scoped operators.
* *Operator-deployed apps*: Astra Control supports apps installed with namespace-scoped operators. These operators are generally designed with a "pass-by-value" rather than "pass-by-reference" architecture. The following are some operator apps that follow these patterns:
** https://github.com/k8ssandra/cass-operator/tree/v1.7.1[Apache K8ssandra^]
+
NOTE: For K8ssandra, in-place restore operations are supported. A restore operation to a new namespace or cluster requires that the original instance of the application to be taken down. This is to ensure that the peer group information carried over does not lead to cross-instance communication. Cloning of the app is not supported.

** https://github.com/jenkinsci/kubernetes-operator[Jenkins CI^]
** https://github.com/percona/percona-xtradb-cluster-operator[Percona XtraDB Cluster^]

Astra Control might not be able to clone an operator that is designed with a “pass-by-reference” architecture (for example, the CockroachDB operator). During these types of cloning operations, the cloned operator attempts to reference Kubernetes secrets from the source operator despite having its own new secret as part of the cloning process. The clone operation might fail because Astra Control is unaware of the Kubernetes secrets in the source operator.

NOTE: An operator and the app it installs must use the same namespace; you might need to modify the deployment .yaml file for the operator to ensure this is the case.

== Install apps on your cluster

Now that you've added your cluster to Astra Control, you can install apps on the cluster. Persistent volumes will be provisioned on the new storage classes by default. After the pods are online, you can manage the app with Astra Control.

Astra Control will manage stateful apps only if the storage is on a storage class installed by Astra Control.

ifdef::gcp[]
* link:../learn/choose-class-and-size.html[Learn about storage classes for GKE clusters]
endif::gcp[]
ifdef::azure[]
* link:../learn/azure-storage.html[Learn about storage classes for AKS clusters]
endif::azure[]

== Manage apps

When Astra Control discovers your clusters, the apps on those clusters are unmanaged until you choose how you want to manage them. You can choose to link:../learn/app-management.html[manage an app individually or manage all apps associated with a namespace]. It all comes down to the level of granularity that you need for data protection operations.

Although Astra Control enables you to separately manage both levels of the hierarchy (the namespace and the apps in that namespace), the best practice is to choose one or the other. Actions that you take in Astra Control can fail if the actions take place at the same time at both the namespace and app level.

TIP: As an example, you might want to set a backup policy for "maria" that has a weekly cadence, but you might need to back up "mariadb" (which is in the same namespace) more frequently than that. Based on those needs, you would need to manage the apps separately and not under a single namespace.

.What you'll need
* A cluster added to Astra Control.
* One or more installed apps on the cluster. <<Supported app installation methods,Read more about supported app installation methods>>.
* Namespaces specified on the cluster added to Astra Control.
* (Optional) Kubernetes labels.
+
TIP: A label is a key/value pair you can assign to Kubernetes objects for identification. Labels make it easier to sort, organize, and find your Kubernetes objects. To learn more about Kubernetes labels, https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/[see the official Kubernetes documentation^].

Before you begin, you should also understand link:../use/manage-apps.html#what-about-system-apps[managing standard and system apps]. For instructions on how to manage apps using the Astra Control API, see the link:https://docs.netapp.com/us-en/astra-automation/[Astra Automation and API information^].

.App management options

* <<Define individual app resources to manage>>
* <<Define all applications in a namespace to be managed>>

.Additional app options
//*	<<Rename apps>>
*	<<Unmanage apps>>

=== Define individual app resources to manage

You can specify the Kubernetes resources that make up an app that you want to manage with Astra Control. Defining an app enables you to group elements of your Kubernetes cluster into a single app. This collection of Kubernetes resources is based on a namespace and a label.

Defining a custom app gives you more granular control over what to include in an Astra Control operation, including clone, snapshot, backup, and protection policies.

In most cases you will want to use Astra Control's protection functionality on your entire app. However, you can also use protection features according to the labels you assign to Kubernetes objects in a namespace.

WARNING: Overlapping policies for the same resource under different names can cause data conflicts. If you create a custom app for a resource, be sure it's not being cloned or backed up under any other policies. <<Example: Separate Protection Policy for different releases, Read more about best practices.>>


.Steps

. From the Applications page, select *Define*.
. In the *Define application* window, enter the app name.
. Choose the cluster that is already managed by Astra Control in the *Cluster* drop-down list.
. Choose one namespace for the app from the *Namespace* drop-down list.
+
NOTE: Custom apps can be defined only within a specified namespace on a single cluster. Astra Control does not support the ability for a custom app to span multiple namespaces or clusters.

. From the *Label* drop-down list, select a label for the app and namespace.
. After you select *Define*, repeat the process for other apps, as needed.

After you finish defining an app, the app appears in the list of managed apps on the Applications page. You can now manage its resources in Astra Control. Once the app is managed, you can clone it, create backups and snapshots, or create a custom Protection Policy for each group of resources based on Kubernetes labels.

NOTE: The app you just added might have a warning icon under the Protected column, indicating that it is not backed up and not scheduled for backups yet.

TIP: To see details of a particular app, select the app name.

=== Define all applications in a namespace to be managed

You can add all Kubernetes resources in a namespace to Astra Control management by defining the resources of that namespace as an application. This method is preferable to defining apps individually if you intend to manage and protect all app resources in a particular namespace in a similar way and at common intervals.

.Steps

. From the Clusters page, select a cluster.
. Select the *Namespaces* tab.
. Select the Actions menu for the namespace that contains the app resources you want to manage and select *Define as application*.
+
TIP: If you want to manage multiple namespaces, select the namespaces and select the *Actions* button in the upper-left corner and select *manage*.
+
NOTE: Select the *Show system namespaces* checkbox to reveal system namespaces that are usually not used in app management by default. link:../use/manage-apps.html#what-about-system-apps[Read more].

After the process completes, the application resources associated with the namespace appear in the namespace row.

== What about system apps?

Astra Control also discovers the system apps running on a Kubernetes cluster. We don't show you these system apps by default because it's rare that you'd need to back them up.

You can display system apps from the Applications page by selecting the *Show system apps* check box under the Clusters filter in the toolbar.

image:acs_apps_system_apps3.png[A screenshot that shows the Show System Apps option that is available when you select All Clusters in the Applications screen.]

TIP: Astra Control itself is not a standard app; it is a "system app." You should not try to manage Astra Control itself. Astra Control itself isn't shown by default for management.
